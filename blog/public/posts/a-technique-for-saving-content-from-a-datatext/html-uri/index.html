<!DOCTYPE html>
<html><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Thoughts on code and building things.">
    
    <link rel="shortcut icon" href="http://localhost:1313/favicon.ico">
    <link href="http://localhost:1313/fontawesome/css/all.min.css" rel="stylesheet">

    <style>
#post-header {
    text-align: center;
}

main#content blockquote {
  margin-top: 10px;
    margin-bottom: 10px;
    margin-left: 50px;
    padding-left: 15px;
    border-left: 5px solid;
    display: inline-flex;
}
main#content p code {
    background: black;
    color: white;
    border-radius: 5px;
}
 
table {
padding: 1.5rem 2.2rem;
    margin: 20px 0;
    margin-left: -3.8%;
    box-sizing: border-box;
    overflow-x: auto;
}

 
table {
  color: #333;
  background: white;
  border: 1px solid grey;
  font-size: 12pt;
  border-collapse: collapse;
}
table thead th,
table tfoot th {
  color: #777;
  background: rgba(0,0,0,.1);
}
table caption {
  padding:.5em;
}
table th,
table td {
  padding: .5em;
  border: 1px solid lightgrey;
}
 
[data-table-theme*=zebra] tbody tr:nth-of-type(odd) {
  background: rgba(0,0,0,.05);
}
[data-table-theme*=zebra][data-table-theme*=dark] tbody tr:nth-of-type(odd) {
  background: rgba(255,255,255,.05);
}
 
[data-table-theme*=dark] {
  color: #ddd;
  background: #333;
  font-size: 12pt;
  border-collapse: collapse;
}
[data-table-theme*=dark] thead th,
[data-table-theme*=dark] tfoot th {
  color: #aaa;
  background: rgba(0255,255,255,.15);
}
[data-table-theme*=dark] caption {
  padding:.5em;
}
[data-table-theme*=dark] th,
[data-table-theme*=dark] td {
  padding: .5em;
  border: 1px solid grey;
}
    </style>

    
    <link rel="stylesheet" href="/css/style.min.css">

    <title>A technique for saving content from a `data:text/html` URI</title>
    <script data-goatcounter="https://devtaqkarim.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
    
    
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "50d6391b0ac14e93bae2808292658be2"}'></script>
    
</head>
<body><header id="banner">
    
    <nav>
        <ul>
            <li>
                <a href="https://github.com/mottaquikarim" title="github" target="_blank"><i class='fab fa-github'></i></a>
            </li><li>
                <a href="https://www.linkedin.com/in/mottaqui-karim-5b01212a/" title="linkedin" target="_blank"><i class='fab fa-linkedin'></i></a>
            </li><li>
                <a href="https://twitter.com/taqkarim" title="twitter" target="_blank"><i class='fab fa-twitter'></i></a>
            </li>
        </ul>
    </nav>
    <nav>
        <ul>
            <li>
                <a href="/" title="home">home</a>
            </li><li>
                <a href="/about/" title="about">about</a>
            </li><li>
                <a href="/tags/" title="tags">tags</a>
            </li>
        </ul>
    </nav>
</header>
<main id="content">
<article>
    <small><strong>TAGS: </strong></small>
        
        
            <small><strong><a href="http://localhost:1313/tags/featured/">featured</a></strong></small>
        
            <small><strong><a href="http://localhost:1313/tags/javascript/">javascript</a></strong></small>
        
            <small><strong><a href="http://localhost:1313/tags/just-for-fun/">just for fun</a></strong></small>
        <header id="post-header">
        <h1>A technique for saving content from a `data:text/html` URI</h1><time>January 22, 2022</time></header><aside id="toc">
    <h4>Table of Contents</h4>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background.</a></li>
    <li><a href="#experimentation">Experimentation.</a>
      <ul>
        <li><a href="#naive-attempt-uri">Naive attempt: URI</a></li>
        <li><a href="#naive-attempt-js-implementation">Naive attempt: js implementation</a></li>
        <li><a href="#naive-attempt-remarks">Naive attempt: remarks</a></li>
        <li><a href="#refined-attempt-uri">Refined attempt: URI</a></li>
        <li><a href="#refined-attempt-js-implementation">Refined attempt: js implementation</a></li>
        <li><a href="#refined-attempt-remarks">Refined attempt: remarks</a></li>
      </ul>
    </li>
    <li><a href="#output-artifact">Output Artifact.</a></li>
    <li><a href="#ps">PS!</a></li>
  </ul>
</nav>
</aside>

<p>OMG! I finally got it. ðŸ™Œ</p>
<p><strong>BLUF</strong></p>
<p>ðŸ™Œ Turn your chrome tab into a &ldquo;notepad&rdquo; using: <code>data:text/html, &lt;html contenteditable&gt;</code> (copy and paste this into your URL bar to test it out)</p>
<p>ðŸš¨ But! If you hit back or refresh by accident, you lose your notes (this sucks)</p>
<p>âœ… Using javsacript&rsquo;s clipboard functionality, I came up with a solution that updates the clipboard (eg: available to recover by &ldquo;pasting&rdquo; into your favorite word editor) everytime you type in to the &ldquo;notepad&rdquo;.</p>
<p>ðŸ‘‰ Drag <strong><a href="data:text/html,%3Chtml%20contenteditable%3E%3Cscript%3Evar%20sel%3Ddocument.getSelection%28%29%3Bdocument.querySelector%28%22html%22%29.addEventListener%28%22input%22%2Cfunction%28%29%7Bsaved%3D%5Bsel.focusNode%2Csel.focusOffset%5D%2Cdocument.execCommand%28%22selectall%22%29%2Cdocument.execCommand%28%22copy%22%29%2Cwindow.getSelection%28%29.removeAllRanges%28%29%2Cdocument.querySelector%28%22html%22%29.focus%28%29%2Csel.collapse%28saved%5B0%5D%2Csaved%5B1%5D%29%7D%29%3B%3C%2Fscript%3E"><code>TabNotes</code></a></strong> to your bookmark bar to see this working in action. ðŸ‘ˆ
(Note: In case you don&rsquo;t want to add as bookmark: clicking on this link directly will not work as it is a <code>data:text/html</code> URI but opening in a new tab will also do the trick)</p>
<h2 id="background">Background.</h2>
<p>On <strong>May 13, 2016</strong> I posted this article &ndash; <a href="https://taqkarim.medium.com/a-technique-for-saving-content-from-a-data-text-html-uri-10f045a8876d">A technique for saving content from a data:text/html, URI</a> &ndash; on Medium:</p>
<blockquote>
<p>TL; DR: I put together a script that lets you save the notes you write in your browser-scratchpad.</p></blockquote>
<p>To be frank, my solution sucked. For good reason, the <code>data:text/html</code> in browser URI trick disallowed a lot of the common browser APIs that would allow local caching (eg: localStorage, etc).</p>
<p>My solution was dirty (I expound in decent detail on my Medium article) and I never actually ended up using it. But - <code>data:text/html, &lt;html contenteditable&gt;</code> is quite useful and I use it <em>often</em> to jot down meeting notes or off the record points during 1:1s (that I don&rsquo;t want tracked in say Gdocs)</p>
<p>And this morning, while shaving, a thought occurred to me:</p>
<blockquote>
<p>Why not save the text to the clipboard?</p></blockquote>
<p>!! I can&rsquo;t believe I didn&rsquo;t think of this before!</p>
<h2 id="experimentation">Experimentation.</h2>
<p>I gotta admit fam, this got me pretty fired up. I started looking into what kinds of options we have currently to handle copy/pasta type operations in javascript.</p>
<p>Disappointingly, the <code>navigator.clipboard</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/clipboard">API</a> is only available <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard">in secure contexts</a>. This means attempting to access the Clipboard API returns an error. whomp whomp.</p>
<p>As it turns out though, <code>document.execCommand</code> (soon to be deprecated, unfortunately) <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand#commands">API</a> still works!</p>
<p>(NB: this idea occurred to me too late, it seems. I have a <code>PS!</code> in the end of this post with a compromise solution)</p>
<p>The main draw back with <code>document.execCommand('copy')</code> is that it only operates over selected text.</p>
<p>My naive attempt was to grab text input (using contenteditable&rsquo;s <code>input</code> event), write it to an invisible textarea (css <code>visibility: hidden</code> ftw!) and quickly run the copy execCommand:</p>
<h3 id="naive-attempt-uri">Naive attempt: URI</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">data:text/html, <span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;&lt;</span><span class="nt">div</span> <span class="na">contenteditable</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">textarea</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;visibility: visible&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">textarea</span><span class="p">&gt;&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>Note: <code>visibility</code> is NOT hidden for the sake of demonstration purposes</p>
<h3 id="naive-attempt-js-implementation">Naive attempt: js implementation</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">timeout</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">div</span> <span class="o">=</span> <span class="k">this</span>
</span></span><span class="line"><span class="cl">    <span class="nx">text</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;textarea&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">timeout</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">_</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="p">.</span><span class="nx">select</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s1">&#39;copy&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">div</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="mi">1000</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></div><video draggable="false" controls="" playsinline="" autoplay="" loop="" class="" style="width: 100%; height: auto; border: 1px solid black;">
  <source type="video/mp4" src="/dev/img/naive_attempt_1.mp4">
</video>
<select onchange="document.querySelector('video').playbackRate = Number(this.value)">
  <option value="1.0">Default (1.0)</option>
  <option value="0.50">Slower (0.5)</option>
  <option value="0.10">Slowest (0.1)</option>
</select>
<h3 id="naive-attempt-remarks">Naive attempt: remarks</h3>
<p>This implementation sets a simple cancellable timer (to ensure that we only perform this copy work <em>after</em> user has stopped typing). We read the contents of our content editable, stick it into the textarea (which we can programmatically select) and then run our exec command.</p>
<p>This ends up working pretty well!</p>
<p>But we can do better. The main tradeoffs here are:</p>
<ul>
<li>The actual uri requires more HTML / css. (The end result has a ton of js in there too so this shouldn&rsquo;t matter but still, I wanted to arrive at a solution ideally with a single element (the <code>&lt;html contenteditable</code>)</li>
<li>Focusing on the textarea means we lose access to our cursor position in the actual content &ndash; this sucks! I wanted to find a better approach</li>
</ul>
<h3 id="refined-attempt-uri">Refined attempt: URI</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">data:text/html, <span class="p">&lt;</span><span class="nt">html</span> <span class="na">contenteditable</span><span class="p">&gt;</span>
</span></span></code></pre></div><h3 id="refined-attempt-js-implementation">Refined attempt: js implementation</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">saved</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">sel</span><span class="p">.</span><span class="nx">focusNode</span><span class="p">,</span> <span class="nx">sel</span><span class="p">.</span><span class="nx">focusOffset</span> <span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s1">&#39;selectall&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s1">&#39;copy&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">().</span><span class="nx">removeAllRanges</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">).</span><span class="nx">focus</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sel</span><span class="p">.</span><span class="nx">collapse</span><span class="p">(</span><span class="nx">saved</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">saved</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></div><video draggable="false" controls="" playsinline="" autoplay="" loop="" class="" style="width: 100%; height: auto; border: 1px solid black;">
  <source type="video/mp4" src="/dev/img/refined_attempt_1.mp4">
</video>
<select onchange="document.querySelector('video').playbackRate = Number(this.value)">
  <option value="1.0">Default (1.0)</option>
  <option value="0.50">Slower (0.5)</option>
  <option value="0.10">Slowest (0.1)</option>
</select>
<h3 id="refined-attempt-remarks">Refined attempt: remarks</h3>
<p>I was able to find a solution to saving the cursor position by googling. (I&rsquo;ve worked with contenteditables + ranges in the past and I still have nightmares &ndash; as such I resolved to try and lean on the collective expertise of the internet to find a solution).</p>
<p>I looked through the implementation on <a href="https://codepen.io/kmessner/pen/oXgRrG">this codepen</a> and pulled out the relevant bits for my solution (the <code>focusNode</code>/ <code>focusOffset</code> trick from above)</p>
<p>With this in place I was off to the races &ndash; my new soluton works as follows:</p>
<ol>
<li>on input event, let&rsquo;s save the cursor offset</li>
<li>this lets us momentarily select the entire text content <em>in the contenteditable</em> itself</li>
<li>because text is selected, we can copy</li>
<li>to reset, we remove the selection and focus into the contenteditable once more</li>
<li>finally, we restore the cursor position</li>
</ol>
<p>This works really well and the overall code is only a few lines long (thank <em>god</em>)</p>
<p>Ta da!</p>
<h2 id="output-artifact">Output Artifact.</h2>
<p>I ran the js code in a minifier (this <a href="https://jscompress.com/">one</a>) which resulted in:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">sel</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">();</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;html&#34;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;input&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">saved</span><span class="o">=</span><span class="p">[</span><span class="nx">sel</span><span class="p">.</span><span class="nx">focusNode</span><span class="p">,</span><span class="nx">sel</span><span class="p">.</span><span class="nx">focusOffset</span><span class="p">],</span><span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s2">&#34;selectall&#34;</span><span class="p">),</span><span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s2">&#34;copy&#34;</span><span class="p">),</span><span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">().</span><span class="nx">removeAllRanges</span><span class="p">(),</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;html&#34;</span><span class="p">).</span><span class="nx">focus</span><span class="p">(),</span><span class="nx">sel</span><span class="p">.</span><span class="nx">collapse</span><span class="p">(</span><span class="nx">saved</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">saved</span><span class="p">[</span><span class="mi">1</span><span class="p">])});</span>
</span></span></code></pre></div><p>Now, in order to use this functionality all we need to do is copy/paste the following into a URL bar:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">data:text/html, <span class="p">&lt;</span><span class="nt">html</span> <span class="na">contenteditable</span><span class="p">&gt;&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="kd">var</span> <span class="nx">sel</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">();</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;html&#34;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;input&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">saved</span><span class="o">=</span><span class="p">[</span><span class="nx">sel</span><span class="p">.</span><span class="nx">focusNode</span><span class="p">,</span><span class="nx">sel</span><span class="p">.</span><span class="nx">focusOffset</span><span class="p">],</span><span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s2">&#34;selectall&#34;</span><span class="p">),</span><span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s2">&#34;copy&#34;</span><span class="p">),</span><span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">().</span><span class="nx">removeAllRanges</span><span class="p">(),</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;html&#34;</span><span class="p">).</span><span class="nx">focus</span><span class="p">(),</span><span class="nx">sel</span><span class="p">.</span><span class="nx">collapse</span><span class="p">(</span><span class="nx">saved</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">saved</span><span class="p">[</span><span class="mi">1</span><span class="p">])});&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>And everything we type into the &ldquo;scratchpad&rdquo; will automatically be saved to our clipboard!</p>
<p>(You can drag this link: <strong><a href="data:text/html,%3Chtml%20contenteditable%3E%3Cscript%3Evar%20sel%3Ddocument.getSelection%28%29%3Bdocument.querySelector%28%22html%22%29.addEventListener%28%22input%22%2Cfunction%28%29%7Bsaved%3D%5Bsel.focusNode%2Csel.focusOffset%5D%2Cdocument.execCommand%28%22selectall%22%29%2Cdocument.execCommand%28%22copy%22%29%2Cwindow.getSelection%28%29.removeAllRanges%28%29%2Cdocument.querySelector%28%22html%22%29.focus%28%29%2Csel.collapse%28saved%5B0%5D%2Csaved%5B1%5D%29%7D%29%3B%3C%2Fscript%3E"><code>TabNotes</code></a></strong> to your bookmark bar as well to use now).</p>
<h2 id="ps">PS!</h2>
<p>So what happens once the <code>execCommand</code> is fully deprecated? Idk, fam. But while experimenting, I did play with this solution:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;beforeunload&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nx">e</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alert</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></div><p>This prompts an alert message which can be used to prevent data loss. Compressing and adding to our URI we get:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">data:text/html, <span class="p">&lt;</span><span class="nt">html</span> <span class="na">contenteditable</span><span class="p">&gt;&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;beforeunload&#34;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">(),</span><span class="nx">e</span><span class="p">.</span><span class="nx">returnValue</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="nx">alert</span><span class="p">()});&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></div><video draggable="false" controls="" playsinline="" autoplay="" loop="" class="" style="width: 100%; height: auto; border: 1px solid black;">
  <source type="video/mp4" src="/dev/img/ps_1.mp4">
</video>
<select onchange="document.querySelector('video').playbackRate = Number(this.value)">
  <option value="1.0">Default (1.0)</option>
  <option value="0.50">Slower (0.5)</option>
  <option value="0.10">Slowest (0.1)</option>
</select>
<p>(You can drag this link: <strong><a href="data:text/html,%3Chtml%20contenteditable%3E%3Cscript%3Ewindow.addEventListener%28%22beforeunload%22%2Cfunction%28e%29%7Be.preventDefault%28%29%2Ce.returnValue%3D%22%22%2Calert%28%29%7D%29%3B%3C%2Fscript%3E"><code>TabNotes: alert</code></a></strong> to your bookmark bar as well to use now).</p>

	    <h2>Share</h2>
        <a href="https://twitter.com/intent/tweet?original_referer=http%3a%2f%2flocalhost%3a1313%2fposts%2fa-technique-for-saving-content-from-a-datatext%2fhtml-uri%2f?utm_source=twitter&text=Check out this article by @taqkarim: http%3a%2f%2flocalhost%3a1313%2fposts%2fa-technique-for-saving-content-from-a-datatext%2fhtml-uri%2f?utm_source=twitter" target="_blank"><i class="fab fa-twitter fa-2x"></i></a>
        <a href="https://www.linkedin.com/shareArticle?mini=false&url=http%3a%2f%2flocalhost%3a1313%2fposts%2fa-technique-for-saving-content-from-a-datatext%2fhtml-uri%2f?utm_source=linkedin" target="_blank"><i class="fab fa-linkedin fa-2x"></i></a>
        <a href="https://www.reddit.com/submit?url=http%3A%2F%2Flocalhost%3A1313%2Fposts%2Fa-technique-for-saving-content-from-a-datatext%2Fhtml-uri%2F%3Futm_source%3Dreddit&title=A&#43;technique&#43;for&#43;saving&#43;content&#43;from&#43;a&#43;%60data%3Atext%2Fhtml%60&#43;URI" target="_blank" rel="noopener">
          <i class="fab fa-reddit fa-2x"></i>
        </a>
</article>

        </main><footer id="footer">
    Copyright Â© 2022 Taq Karim
</footer>
</body>
</html>
